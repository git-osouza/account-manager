(function(){"use strict";var e={7607:function(e,a,t){var o=t(9322),n=t(641);const r={class:"container"},l={class:"content"};function s(e,a,t,o,s,c){const i=(0,n.g2)("HeaderComponent"),u=(0,n.g2)("router-view"),d=(0,n.g2)("FooterComponent");return(0,n.uX)(),(0,n.CE)("div",r,[o.isLoginPage?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(i,{key:0})),(0,n.Lk)("div",l,[(0,n.bF)(u)]),o.isLoginPage?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(d,{key:1}))])}const c={class:"d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top"};function i(e,a,t,o,r,l){return(0,n.uX)(),(0,n.CE)("footer",c,a[0]||(a[0]=[(0,n.Fv)('<div class="col-md-4 d-flex align-items-center"><a href="/" class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1"><svg class="bi" width="30" height="24"><use xlink:href="#bootstrap"></use></svg></a><span class="mb-3 mb-md-0 text-body-secondary">© 2024 Genrenciador de contas, Inc</span></div>',1)]))}var u={name:"FooterComponent",data(){return{}},methods:{}},d=t(6262);const p=(0,d.A)(u,[["render",i]]);var m=p,v=t.p+"img/prancheta.0c22a0ba.png";const f={class:"navbar navbar-expand-lg bg-body-tertiary"},g={class:"container-fluid"},h={class:"collapse navbar-collapse",id:"navbarNavAltMarkup"},b={class:"navbar-nav"};function k(e,a,t,o,r,l){const s=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)("nav",f,[(0,n.Lk)("div",g,[a[5]||(a[5]=(0,n.Lk)("a",{class:"navbar-brand",href:"#"},[(0,n.Lk)("img",{src:v,alt:"account-manager",width:"35",height:"36"}),(0,n.eW)(" Gerenciador de contas ")],-1)),a[6]||(a[6]=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,n.Lk)("div",h,[(0,n.Lk)("div",b,[(0,n.bF)(s,{class:"nav-link",to:"/Dashboard"},{default:(0,n.k6)((()=>a[1]||(a[1]=[(0,n.eW)(" Dashboard "),(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-speedometer",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M8 2a.5.5 0 0 1 .5.5V4a.5.5 0 0 1-1 0V2.5A.5.5 0 0 1 8 2M3.732 3.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707M2 8a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8m9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5m.754-4.246a.39.39 0 0 0-.527-.02L7.547 7.31A.91.91 0 1 0 8.85 8.569l3.434-4.297a.39.39 0 0 0-.029-.518z"}),(0,n.Lk)("path",{"fill-rule":"evenodd",d:"M6.664 15.889A8 8 0 1 1 9.336.11a8 8 0 0 1-2.672 15.78zm-4.665-4.283A11.95 11.95 0 0 1 8 10c2.186 0 4.236.585 6.001 1.606a7 7 0 1 0-12.002 0"})],-1)]))),_:1}),(0,n.bF)(s,{class:"nav-link",to:"/Listar"},{default:(0,n.k6)((()=>a[2]||(a[2]=[(0,n.eW)(" Listar "),(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-card-heading",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2z"}),(0,n.Lk)("path",{d:"M3 8.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m0-5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z"})],-1)]))),_:1}),(0,n.bF)(s,{class:"nav-link",to:"/Cadastrar"},{default:(0,n.k6)((()=>a[3]||(a[3]=[(0,n.eW)(" Cadastrar "),(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-circle-fill",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"})],-1)]))),_:1}),(0,n.Lk)("a",{href:"#",class:"nav-link",onClick:a[0]||(a[0]=(...e)=>l.logoff&&l.logoff(...e))},a[4]||(a[4]=[(0,n.eW)(" Sair "),(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})],-1)]))])])])])}t(4114);var L=t(5183);const w="https://mzuppxztdccfoaordyix.supabase.co",y="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16dXBweHp0ZGNjZm9hb3JkeWl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkzNjE4NTQsImV4cCI6MjA1NDkzNzg1NH0.oJAm8ObKa286sqAzjn8tsEmBt6s0YFp1boKyKHek5rM",_=(0,L.UU)(w,y);var C=_,E=t(5220);const A={class:"container"},x={class:"row"},V={class:"col-6"},I={class:"form-floating mb-3"},M={class:"col-6"},O={class:"form-floating mb-3"},z={class:"row"},j={class:"col-6"},B={class:"form-floating mb-3"},D={class:"col-6"},S={class:"form-floating mb-3"},X={class:"row"},F={class:"col-6"},P={class:"form-floating mb-3"},U={class:"col-6"},N={class:"form-floating mb-3"},J={class:"d-flex justify-content-center gap-3"};function R(e,a,t,r,l,s){return(0,n.uX)(),(0,n.CE)("div",A,[(0,n.Lk)("form",{onSubmit:a[7]||(a[7]=(0,o.D$)(((...e)=>r.insertMultipleAccounts&&r.insertMultipleAccounts(...e)),["prevent"]))},[(0,n.Lk)("div",x,[(0,n.Lk)("div",V,[(0,n.Lk)("div",I,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.insertVo.categoria=e),class:"form-select",id:"floatingSelect",required:""},a[8]||(a[8]=[(0,n.Fv)('<option disabled value="" data-v-c46b4fec>Selecione uma categoria</option><option value="despesas-fixas" data-v-c46b4fec>🏠 Despesas Fixas</option><option value="transporte" data-v-c46b4fec>🚗 Transporte</option><option value="alimentacao" data-v-c46b4fec>🛒 Alimentação</option><option value="saude" data-v-c46b4fec>🩺 Saúde</option><option value="educacao" data-v-c46b4fec>🎓 Educação</option><option value="dividas-pagamentos" data-v-c46b4fec>💳 Dívidas e Pagamentos</option><option value="lazer-entretenimento" data-v-c46b4fec>🎉 Lazer e Entretenimento</option><option value="manutencao-casa" data-v-c46b4fec>🛠️ Manutenção e Casa</option><option value="despesas-pessoais" data-v-c46b4fec>👔 Despesas Pessoais</option><option value="investimentos-poupanca" data-v-c46b4fec>📈 Investimentos e Poupança</option>',11)]),512),[[o.u1,r.insertVo.categoria]]),a[9]||(a[9]=(0,n.Lk)("label",{for:"floatingSelect"},"Categoria",-1))])]),(0,n.Lk)("div",M,[(0,n.Lk)("div",O,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>r.insertVo.ds_nome=e),class:"form-control",id:"floatingInput",placeholder:"Nome Conta",required:""},null,512),[[o.Jo,r.insertVo.ds_nome]]),a[10]||(a[10]=(0,n.Lk)("label",{for:"floatingInput"},"Nome conta",-1))])])]),(0,n.Lk)("div",z,[(0,n.Lk)("div",j,[(0,n.Lk)("div",B,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>r.parcelas.valor_parcela=e),class:"form-control",id:"floatingInput",placeholder:"Valor",required:""},null,512),[[o.Jo,r.parcelas.valor_parcela]]),a[11]||(a[11]=(0,n.Lk)("label",{for:"floatingInput"},"Valor",-1))])]),(0,n.Lk)("div",D,[(0,n.Lk)("div",S,[(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":a[3]||(a[3]=e=>r.parcelas.nr_parcelas=e),class:"form-control",id:"floatingInput",placeholder:"Nº Parcelas",required:""},null,512),[[o.Jo,r.parcelas.nr_parcelas]]),a[12]||(a[12]=(0,n.Lk)("label",{for:"floatingInput"},"Nº parcelas",-1))])])]),(0,n.Lk)("div",X,[(0,n.Lk)("div",F,[(0,n.Lk)("div",P,[(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":a[4]||(a[4]=e=>r.insertVo.dia_vencimento=e),class:"form-control",id:"floatingInput",placeholder:"Vencimento",required:""},null,512),[[o.Jo,r.insertVo.dia_vencimento]]),a[13]||(a[13]=(0,n.Lk)("label",{for:"floatingInput"},"Dia vencimento",-1))])]),(0,n.Lk)("div",U,[(0,n.Lk)("div",N,[(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":a[5]||(a[5]=e=>r.parcelas.dt_vencimento=e),class:"form-control",id:"floatingInput",placeholder:"Vencimento",required:""},null,512),[[o.Jo,r.parcelas.dt_vencimento]]),a[14]||(a[14]=(0,n.Lk)("label",{for:"floatingInput"},"Data 1° vencimento",-1))])])]),(0,n.Lk)("div",J,[a[16]||(a[16]=(0,n.Lk)("button",{type:"submit",class:"btn btn-dark"},[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-floppy-fill",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M0 1.5A1.5 1.5 0 0 1 1.5 0H3v5.5A1.5 1.5 0 0 0 4.5 7h7A1.5 1.5 0 0 0 13 5.5V0h.086a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5H14v-5.5A1.5 1.5 0 0 0 12.5 9h-9A1.5 1.5 0 0 0 2 10.5V16h-.5A1.5 1.5 0 0 1 0 14.5z"}),(0,n.Lk)("path",{d:"M3 16h10v-5.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9-16H4v5.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5zM9 1h2v4H9z"})])],-1)),(0,n.Lk)("button",{type:"button",class:"btn btn-dark",onClick:a[6]||(a[6]=e=>r.clear())},a[15]||(a[15]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})],-1)]))])],32)])}var q=t(9841),H=t(5246),K={name:"CadastrarView",setup(){const e=(0,H.dj)(),a=(0,q.Kh)({nr_parcelas:"",valor_parcela:"",dt_vencimento:"",status:"Pendente"}),t=(0,q.Kh)({ds_nome:"",categoria:"",valor_total:"",dia_vencimento:""});async function o(){const{data:{user:o}}=await C.auth.getUser();if(o){const{data:n,error:r}=await C.from("account").insert({ds_nome:t.ds_nome,valor_total:a.valor_parcela*a.nr_parcelas,dia_vencimento:t.dia_vencimento,user_id:o.id,categoria:t.categoria}).select();if(r)return console.error("Erro ao inserir contas",r),e.error("Ocorreu algum erro ao inserir as contas"),null;const s=new Date(a.dt_vencimento),c=new Array(Number(a.nr_parcelas)).fill(0).map(((e,o)=>{let r;return 0===o?r=new Date(s):(r=new Date(s),r.setMonth(s.getMonth()+o),r.setDate(t.dia_vencimento-1)),{id_account:n[0].id,numero_parcela:o+1,valor_parcela:a.valor_parcela,dt_vencimento:r,status:a.status}})),{error:i}=await C.from("account_parcelas").insert(c);if(i)return console.error("Erro ao inserir parcelas",i),e.error("Ocorreu algum erro ao inserir as parcelas"),null;e.success("Contas inseridas com sucesso"),l()}}function r(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}const l=()=>{t.ds_nome="",t.valor_total="",t.dia_vencimento="",t.categoria="",a.nr_parcelas="",a.valor_parcela="",a.dt_vencimento=""};return(0,n.sV)((()=>{})),{insertVo:t,parcelas:a,clear:l,insertMultipleAccounts:o,formattedValue:r}}};const T=(0,d.A)(K,[["render",R],["__scopeId","data-v-c46b4fec"]]);var W=T,$=t(2644);const Q={class:"container"},Y={class:"d-flex flex-column align-items-center mb-4 gap-2"},Z={class:"input-group w-auto"},G={class:"input-group w-auto"},ee=["value"],ae={class:"input-group w-auto"},te=["value"],oe={class:"d-flex justify-content-center mb-3"},ne=["value"],re={key:0,class:"alert alert-danger text-center"},le={class:"table-responsive"},se={key:0,class:"table table-striped table-hover"},ce=["onUpdate:modelValue","onBlur"],ie=["onClick"],ue=["onUpdate:modelValue","onBlur"],de=["onClick"],pe=["onUpdate:modelValue","onBlur"],me=["onClick"],ve=["onUpdate:modelValue","onBlur"],fe=["onClick"],ge=["onClick"],he={key:1,class:"text-center mt-3"};function be(e,a,t,r,l,s){return(0,n.uX)(),(0,n.CE)("div",Q,[(0,n.Lk)("div",Y,[(0,n.Lk)("div",Z,[a[3]||(a[3]=(0,n.Lk)("span",{class:"input-group-text"},"💰 Salário",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.monthlySalary=e),type:"number",class:"form-control",placeholder:"Informe o salário do mês"},null,512),[[o.Jo,r.monthlySalary]])]),(0,n.Lk)("div",G,[a[4]||(a[4]=(0,n.Lk)("span",{class:"input-group-text"},"📄 Total de Contas",-1)),(0,n.Lk)("input",{value:r.totalAccounts,type:"number",class:"form-control",readonly:""},null,8,ee)]),(0,n.Lk)("div",ae,[a[5]||(a[5]=(0,n.Lk)("span",{class:"input-group-text"},"💼 Valor Restante",-1)),(0,n.Lk)("input",{value:r.remainingBalance,type:"number",class:"form-control",readonly:""},null,8,te)])]),(0,n.Lk)("div",oe,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>r.selectedMonth=e),onChange:a[2]||(a[2]=(...e)=>r.fetchAccounts&&r.fetchAccounts(...e)),class:"form-select","aria-label":"Selecione o mês"},[a[6]||(a[6]=(0,n.Lk)("option",{value:"",disabled:""},"Selecione o mês",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.months,((e,a)=>((0,n.uX)(),(0,n.CE)("option",{key:a,value:a},(0,$.v_)(e),9,ne)))),128))],544),[[o.u1,r.selectedMonth]])]),r.error?((0,n.uX)(),(0,n.CE)("div",re,(0,$.v_)(r.error),1)):(0,n.Q3)("",!0),(0,n.Lk)("div",le,[r.accounts.length>0?((0,n.uX)(),(0,n.CE)("table",se,[a[9]||(a[9]=(0,n.Lk)("thead",{class:"table-dark",style:{"font-size":"small"}},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Conta"),(0,n.Lk)("th",null,"Dia venc."),(0,n.Lk)("th",null,"Nº parcela"),(0,n.Lk)("th",null,"Valor parcela"),(0,n.Lk)("th",null,"Data vencimento"),(0,n.Lk)("th",null,"Data pagamento"),(0,n.Lk)("th",null,"Status"),(0,n.Lk)("th")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.accounts,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,(0,$.v_)(e.account.ds_nome),1),(0,n.Lk)("td",null,(0,$.v_)(e.account.dia_vencimento),1),(0,n.Lk)("td",null,(0,$.v_)(e.numero_parcela),1),(0,n.Lk)("td",null,[e.isEditingValor_parcela?(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:0,"onUpdate:modelValue":a=>e.valor_parcela=a,onBlur:a=>r.saveEdit(e,"valor_parcela"),type:"number",class:"form-control"},null,40,ce)),[[o.Jo,e.valor_parcela]]):((0,n.uX)(),(0,n.CE)("span",{key:1,onClick:a=>r.edit(e,"valor_parcela"),class:"text-link"},(0,$.v_)(r.formattedValue(e.valor_parcela)),9,ie))]),(0,n.Lk)("td",null,[e.isEditingDt_vencimento?(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:0,"onUpdate:modelValue":a=>e.dt_vencimento=a,onBlur:a=>r.saveEdit(e,"dt_vencimento"),type:"date",class:"form-control"},null,40,ue)),[[o.Jo,e.dt_vencimento]]):((0,n.uX)(),(0,n.CE)("span",{key:1,onClick:a=>r.edit(e,"dt_vencimento"),class:"text-link"},(0,$.v_)(e.dt_vencimento),9,de))]),(0,n.Lk)("td",null,[e.isEditingDt_pagamento?(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:0,"onUpdate:modelValue":a=>e.dt_pagamento=a,onBlur:a=>r.saveEdit(e,"dt_pagamento"),type:"date",class:"form-control"},null,40,pe)),[[o.Jo,e.dt_pagamento]]):((0,n.uX)(),(0,n.CE)("span",{key:1,onClick:a=>r.edit(e,"dt_pagamento"),class:"text-link"},(0,$.v_)(null!==e.dt_pagamento?e.dt_pagamento:0),9,me))]),(0,n.Lk)("td",null,[e.isEditingStatus?(0,n.bo)(((0,n.uX)(),(0,n.CE)("select",{key:0,"onUpdate:modelValue":a=>e.status=a,onBlur:a=>r.saveEdit(e,"status"),class:"form-select"},a[7]||(a[7]=[(0,n.Lk)("option",{value:"Pendente"},"Pendente",-1),(0,n.Lk)("option",{value:"Pago"},"Pago",-1),(0,n.Lk)("option",{value:"Atrasado"},"Atrasado",-1)]),40,ve)),[[o.u1,e.status]]):((0,n.uX)(),(0,n.CE)("span",{key:1,onClick:a=>r.edit(e,"status"),class:"text-link"},(0,$.v_)(e.status),9,fe))]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-link text-dark fw-bold p-0",style:{"text-decoration":"none"},onClick:a=>r.deletarParcela(e.id)},a[8]||(a[8]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash-fill",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"})],-1)]),8,ge)])])))),128))])])):((0,n.uX)(),(0,n.CE)("p",he,"Nenhuma conta encontrada para este mês."))])])}var ke={name:"ListarView",components:{},setup(){const e=(0,H.dj)(),a=(0,q.KR)(!0),t=(0,q.KR)(null),o=(0,q.KR)([]),r=(0,q.KR)(8800),l=(0,q.KR)(0),s=(0,n.EW)((()=>["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"])),c=(0,q.KR)(null),i=(0,n.EW)((()=>{const e=r.value-l.value;return e<0?0:e.toFixed(2)}));async function u(){if(null!==c.value)try{const{data:{user:a},error:t}=await C.auth.getUser();if(t)throw t;if(a){const t=(new Date).getFullYear(),n=new Date(t,c.value,1).toISOString(),r=new Date(t,c.value+1,0).toISOString(),{data:s,error:i}=await C.from("account_parcelas").select("*, account:id_account(*)").eq("account.user_id",a.id).gte("dt_vencimento",n).lte("dt_vencimento",r).order("dt_vencimento",{ascending:!0});i&&e.error("Ocorreu um erro ao buscar as contas");const u=s.map((e=>({...e,status:e.dt_pagamento?"Pago":g(e.dt_vencimento)})));l.value=Number(s.reduce(((e,a)=>e+a.valor_parcela),0)).toFixed(2),o.value=u}}catch(n){console.error("Erro ao buscar contas:",n.message),t.value="Ocorreu um erro ao buscar as contas",e.error(t.value)}finally{a.value=!1}}async function d(a){const t=await C.from("account_parcelas").delete().eq("id",a);t.error&&e.error("Ocorreu um erro ao buscar as contas parcelas"),u()}function p(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function m(e){return new Intl.DateTimeFormat("pt-BR").format(new Date(e))}function v(e,a){e[`isEditing${a.charAt(0).toUpperCase()+a.slice(1)}`]=!0,e[`original${a.charAt(0).toUpperCase()+a.slice(1)}`]=e[a]}async function f(a,t){const o=a[`original${t.charAt(0).toUpperCase()+t.slice(1)}`],n=a[t];if(o!==n){const{error:o}=await C.from("account_parcelas").update({[t]:n}).eq("id",a.id);o?e.error("Ocorreu um erro ao salvar a alteração"):e.success("Alteração salva com sucesso!")}a[`isEditing${t.charAt(0).toUpperCase()+t.slice(1)}`]=!1}function g(e){const a=new Date,t=new Date(e);return t<a?"Atrasado":"Pendente"}return{accounts:o,months:s,selectedMonth:c,loading:a,error:t,formattedValue:p,fetchAccounts:u,deletarParcela:d,edit:v,saveEdit:f,formattedDate:m,monthlySalary:r,totalAccounts:l,remainingBalance:i}}};const Le=(0,d.A)(ke,[["render",be],["__scopeId","data-v-793b5d37"]]);var we=Le,ye=t.p+"img/account-manager.dab14d5b.png";const _e={class:"container login"},Ce={class:"input-group mb-3"},Ee={class:"form-floating"},Ae={class:"input-group mb-3"},xe={class:"form-floating"},Ve={class:"d-flex justify-content-center gap-3"};function Ie(e,a,t,r,l,s){return(0,n.uX)(),(0,n.CE)("div",_e,[a[8]||(a[8]=(0,n.Lk)("figure",{class:"figure text-center d-flex justify-content-center"},[(0,n.Lk)("img",{src:ye,class:"figure-img img-fluid rounded",width:"140",height:"140"})],-1)),(0,n.Lk)("form",null,[(0,n.Lk)("div",Ce,[a[4]||(a[4]=(0,n.Lk)("span",{class:"input-group-text"},[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-person-fill",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"})])],-1)),(0,n.Lk)("div",Ee,[(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":a[0]||(a[0]=e=>r.user.email=e),class:"form-control",id:"floatingInput",placeholder:"E-mail",required:""},null,512),[[o.Jo,r.user.email]]),a[3]||(a[3]=(0,n.Lk)("label",{for:"floatingInput"},"E-mail",-1))])]),(0,n.Lk)("div",Ae,[a[6]||(a[6]=(0,n.Lk)("span",{class:"input-group-text"},[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-lock-fill",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"})])],-1)),(0,n.Lk)("div",xe,[(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=e=>r.user.password=e),class:"form-control",id:"floatingPassword",placeholder:"Senha",required:""},null,512),[[o.Jo,r.user.password]]),a[5]||(a[5]=(0,n.Lk)("label",{for:"floatingPassword"},"Senha",-1))])])]),a[9]||(a[9]=(0,n.Lk)("span",{class:"text-muted d-flex justify-content-center gap-3 mb-3"},"Entrar com",-1)),(0,n.Lk)("div",Ve,[(0,n.Lk)("button",{class:"btn btn-dark",onClick:a[2]||(a[2]=e=>r.signInOAuth("github"))},a[7]||(a[7]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-github",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"})],-1)]))])])}var Me={name:"LoginView",setup(){const e=(0,q.Kh)({email:"",password:""}),a=async()=>{""!==e.email&&""!==e.password&&await He(e.email,e.password)},t=async e=>{await Ke(e)};return{user:e,signInPassword:a,signInOAuth:t}}};const Oe=(0,d.A)(Me,[["render",Ie],["__scopeId","data-v-4bdf3e0e"]]);var ze=Oe;const je={class:"container"},Be={class:"row"};function De(e,a,t,o,r,l){const s=(0,n.g2)("b-card-text"),c=(0,n.g2)("b-card");return(0,n.uX)(),(0,n.CE)("div",je,[(0,n.Lk)("div",Be,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.overdueAccounts,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"col-md-6"},[(0,n.bF)(c,{class:"text-white","bg-variant":"danger","header-class":"fw-bold"},{header:(0,n.k6)((()=>[(0,n.eW)(" Contas em atraso - "+(0,$.v_)(a),1)])),default:(0,n.k6)((()=>[(0,n.bF)(s,null,{default:(0,n.k6)((()=>[(0,n.Lk)("h6",null,"Total de Contas: "+(0,$.v_)(e.count),1),(0,n.Lk)("h6",null,"Valor Total: "+(0,$.v_)(o.formattedValue(e.totalAmount)),1)])),_:2},1024)])),_:2},1024)])))),128))])])}var Se={name:"DashboardView",setup(){const e=(0,H.dj)(),a=(0,q.KR)({});async function t(){try{const{data:{user:t},error:o}=await C.auth.getUser();if(o)throw o;if(!t)return;const n=(new Date).toISOString(),{data:r,error:l}=await C.from("account_parcelas").select("dt_vencimento, valor_parcela").lt("dt_vencimento",n).is("dt_pagamento",null).order("dt_vencimento",{ascending:!1});if(l)return void e.error("Erro ao buscar contas em atraso");const s={};r.forEach((e=>{const a=new Date(e.dt_vencimento),t=`${a.toLocaleString("pt-BR",{month:"long"})} ${a.getFullYear()}`;s[t]||(s[t]={count:0,totalAmount:0}),s[t].count+=1,s[t].totalAmount+=e.valor_parcela})),a.value=s}catch(t){console.error("Erro ao buscar contas:",t.message),e.error("Erro ao carregar dados do dashboard.")}}function o(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}return(0,n.sV)(t),{overdueAccounts:a,formattedValue:o}}};const Xe=(0,d.A)(Se,[["render",De],["__scopeId","data-v-ebb6770c"]]);var Fe=Xe;const Pe=[{path:"/",name:"Login",component:ze},{path:"/Cadastrar",name:"Cadastrar",component:W,meta:{requiresAuth:!0}},{path:"/Listar",name:"Listar",component:we,meta:{requiresAuth:!0}},{path:"/Dashboard",name:"Dashboard",component:Fe,meta:{requiresAuth:!0}}],Ue=(0,E.aE)({history:(0,E.Bt)(),routes:Pe});Ue.beforeEach((async(e,a,t)=>{const o=await Re();if("Login"===e.name&&o)return t({name:"Dashboard"});if("Login"!==e.name&&!o)return t({name:"Login"});if(o)try{return o?t():t({name:"Login"})}catch(n){return t({name:"Login"})}return t()}));var Ne=Ue;const Je=(0,H.dj)(),Re=async()=>{try{const{data:{user:e}}=await C.auth.getUser();return e?"authenticated"===e.role:null}catch(e){console.error("Erro na validação de autenticação:",e)}},qe=async()=>{try{await C.auth.signOut(),Ne.push({name:"Login"})}catch(e){console.error("Erro no logoff:",e)}},He=async(e,a)=>{try{const{error:t}=await C.auth.signInWithPassword({email:e,password:a});t?(console.error("Erro ao fazer login com email e senha",t),Je.error("Erro ao fazer login com e-mail e senha")):Ne.push({name:"Cadastrar"})}catch(t){console.error("Erro ao fazer login",t),Je.error("Erro ao fazer login com e-mail e senha")}},Ke=async e=>{try{const{error:a}=await C.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin+"account-manager/#"}});a?(console.error(`Erro ao fazer login com ${e}`,a),Je.error(`Erro ao fazer login com ${e}`)):Ne.push({name:"Cadastrar"})}catch(a){console.error("Erro ao fazer login",a),Je.error(`Erro ao fazer login com ${e}`)}};var Te={name:"HeaderComponent",data(){return{}},methods:{async logoff(){await qe()}}};const We=(0,d.A)(Te,[["render",k]]);var $e=We,Qe={name:"App",components:{HeaderComponent:$e,FooterComponent:m},setup(){const e=(0,E.lq)(),a=(0,n.EW)((()=>"Login"===e.name));return{isLoginPage:a}}};const Ye=(0,d.A)(Qe,[["render",s]]);var Ze=Ye,Ge=(t(454),t(7917),t(250));const ea=(0,o.Ef)(Ze),aa={};ea.use(Ne),ea.use(H.Ay,aa),ea.use(Ge.Ay),ea.mount("#app")}},a={};function t(o){var n=a[o];if(void 0!==n)return n.exports;var r=a[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,o,n,r){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],r=e[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&r||l>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[c])}))?o.splice(c--,1):(s=!1,r<l&&(l=r));if(s){e.splice(u--,1);var i=n();void 0!==i&&(a=i)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,n,r]}}(),function(){var e,a=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if("object"===typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&"function"===typeof o.then)return o}var r=Object.create(null);t.r(r);var l={};e=e||[null,a({}),a([]),a(a)];for(var s=2&n&&o;"object"==typeof s&&!~e.indexOf(s);s=a(s))Object.getOwnPropertyNames(s).forEach((function(e){l[e]=function(){return o[e]}}));return l["default"]=function(){return o},t.d(r,l),r}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(a,o){return t.f[o](e,a),a}),[]))}}(),function(){t.u=function(e){return"js/"+e+".02247f35.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="account-manager:";t.l=function(o,n,r,l){if(e[o])e[o].push(n);else{var s,c;if(void 0!==r)for(var i=document.getElementsByTagName("script"),u=0;u<i.length;u++){var d=i[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==a+r){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",a+r),s.src=o),e[o]=[n];var p=function(a,t){s.onerror=s.onload=null,clearTimeout(m);var n=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((function(e){return e(t)})),a)return a(t)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/account-manager/"}(),function(){var e={524:0};t.f.j=function(a,o){var n=t.o(e,a)?e[a]:void 0;if(0!==n)if(n)o.push(n[2]);else{var r=new Promise((function(t,o){n=e[a]=[t,o]}));o.push(n[2]=r);var l=t.p+t.u(a),s=new Error,c=function(o){if(t.o(e,a)&&(n=e[a],0!==n&&(e[a]=void 0),n)){var r=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;s.message="Loading chunk "+a+" failed.\n("+r+": "+l+")",s.name="ChunkLoadError",s.type=r,s.request=l,n[1](s)}};t.l(l,c,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,o){var n,r,l=o[0],s=o[1],c=o[2],i=0;if(l.some((function(a){return 0!==e[a]}))){for(n in s)t.o(s,n)&&(t.m[n]=s[n]);if(c)var u=c(t)}for(a&&a(o);i<l.length;i++)r=l[i],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},o=self["webpackChunkaccount_manager"]=self["webpackChunkaccount_manager"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(7607)}));o=t.O(o)})();
//# sourceMappingURL=app.96e3661a.js.map